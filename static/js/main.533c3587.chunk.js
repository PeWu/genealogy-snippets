(this["webpackJsonpgenealogy-snippets"]=this["webpackJsonpgenealogy-snippets"]||[]).push([[0],{81:function(e,n,t){"use strict";t.r(n);var r=t(79),s=t(5),i=t(50),o=t(102),c=t(30),a=t(0),l=(t(94),t(4));function d(e){localStorage.setItem("list",JSON.stringify(e))}function p(){return JSON.parse(localStorage.getItem("list")||"[]")}function j(e){var n;const t=e.names[0].nameForms[0];return t.fullText?t.fullText:null===(n=t.parts)||void 0===n?void 0:n.map((e=>e.value)).join(" ")}function u(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("a",{href:"#",children:j(e.person)||"[unknown]"}),","," "]})}function h(e){var n,t;return Object(l.jsxs)("p",{children:[Object(l.jsxs)("b",{children:[e.fact.type.replace(/.*\//g,"").replace(/([A-Z])/g," $1").replace(/^ /,""),":"," "]}),[e.fact.value,null===(n=e.fact.date)||void 0===n?void 0:n.original,null===(t=e.fact.place)||void 0===t?void 0:t.original].filter((e=>!!e)).join("; ")]})}function b(e){var n,t,r,s,o,c;return Object(l.jsxs)(i.a,{style:{width:500},children:[Object(l.jsx)(i.a.Content,{header:j(e.entry.person)||"[unknown]",style:{width:500}}),Object(l.jsx)(i.a.Content,{children:null===(n=e.entry.person.facts)||void 0===n?void 0:n.map((e=>Object(l.jsx)(h,{fact:e})))}),Object(l.jsxs)(i.a.Content,{children:[e.entry.parents?Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Parents: "}),null===(t=e.entry.parents)||void 0===t?void 0:t.map((e=>Object(l.jsx)(u,{person:e})))]}):null,e.entry.spouses?Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Spouses: "}),null===(r=e.entry.spouses)||void 0===r?void 0:r.map((e=>Object(l.jsx)(u,{person:e})))]}):null,e.entry.children?Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Children: "}),null===(s=e.entry.children)||void 0===s?void 0:s.map((e=>Object(l.jsx)(u,{person:e})))]}):null,e.entry.siblings?Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Siblings: "}),null===(o=e.entry.siblings)||void 0===o?void 0:o.map((e=>Object(l.jsx)(u,{person:e})))]}):null]}),Object(l.jsx)(i.a.Content,{extra:!0,children:Object(l.jsxs)("a",{href:e.entry.page.url,children:[Object(l.jsx)("img",{src:e.entry.page.favicon,style:{width:16,height:16,marginRight:5}}),(c=e.entry.page.url,c.replace(/.*:\/\/(www\.)?([^/]*)\/.*/,"$2"))]})})]})}function f(e,n,t){const r=e.get(n)||[];r.push(t),e.set(n,r)}function g(e){var n,t,r;const s=new Map,i=new Map,o=new Map;null===(n=e.entry.data.relationships)||void 0===n||n.forEach((e=>{const n=e.person1.resource.substring(1),t=e.person2.resource.substring(1);"http://gedcomx.org/Couple"===e.type?(f(o,n,t),f(o,t,n)):"http://gedcomx.org/ParentChild"===e.type&&(f(s,n,t),f(i,t,n))}));const c=new Map;s.forEach((e=>e.forEach((n=>e.forEach((e=>{n!==e&&f(c,n,e)}))))));const a=new Map;c.forEach(((e,n)=>a.set(n,Array.from(new Set(e)))));const d=new Set,p=[],j=new Map;return null===(t=e.entry.data.persons)||void 0===t||t.forEach((e=>j.set(e.id,e))),null===(r=e.entry.data.persons)||void 0===r||r.forEach((n=>{var t,r,c,l,u,h,b,f;if(d.has(n.id))return;const g={page:e.entry.page,person:n,children:null===(t=s.get(n.id))||void 0===t?void 0:t.map((e=>j.get(e))).filter((e=>!!e)),parents:null===(r=i.get(n.id))||void 0===r?void 0:r.map((e=>j.get(e))).filter((e=>!!e)),spouses:null===(c=o.get(n.id))||void 0===c?void 0:c.map((e=>j.get(e))).filter((e=>!!e)),siblings:null===(l=a.get(n.id))||void 0===l?void 0:l.map((e=>j.get(e))).filter((e=>!!e))};null===(u=g.children)||void 0===u||u.forEach((e=>d.add(e.id))),null===(h=g.parents)||void 0===h||h.forEach((e=>d.add(e.id))),null===(b=g.spouses)||void 0===b||b.forEach((e=>d.add(e.id))),null===(f=g.siblings)||void 0===f||f.forEach((e=>d.add(e.id))),d.add(n.id),p.push(g)})),Object(l.jsx)(l.Fragment,{children:p.map((e=>Object(l.jsx)(b,{entry:e},e.person.id)))})}function v(){const[e,n]=Object(a.useState)([]);function t(e){"list"===e.key&&n(p())}return Object(a.useEffect)((()=>n(p())),[]),Object(a.useEffect)((()=>(window.addEventListener("storage",t),()=>window.removeEventListener("storage",t))),[t]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Genealogy Snippets"}),Object(l.jsx)(o.a,{color:"red",onClick:function(){d([]),n([])},children:"Clear all"}),e.map((e=>Object(l.jsx)(g,{entry:e},e.page.url)))]})}function x(){function e(e){const n=p(),t=n.map((e=>e.page.url));let r=!1;for(const s of e.data.data)t.includes(s.page.url)||(n.push(s),r=!0);d(n),window.parent.postMessage({response:r?"added":"not_added"},"*")}return Object(a.useEffect)((()=>(window.addEventListener("message",e),()=>window.removeEventListener("message",e))),[]),Object(l.jsx)("h1",{children:"Extension iframe"})}Object(c.render)(Object(l.jsx)(r.a,{children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{path:"/",element:Object(l.jsx)(v,{})}),Object(l.jsx)(s.a,{path:"extension-iframe",element:Object(l.jsx)(x,{})})]})}),document.querySelector("#root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.533c3587.chunk.js.map